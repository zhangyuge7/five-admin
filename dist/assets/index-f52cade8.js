import{V as L,Z as S,J as $,K as y,o as B,L as H,f as i,b as r,C as h,h as l,c as M,F as V,x as R,i as d,l as T,s as A,g as t,S as g,k as z,d as w,q as k,U as F,P as I,Y as O,a as q,W as N,X as U,n as P}from"./index-a248eb6b.js";import{S as E,T as j,a as D,_ as J,A as K,b as W,c as X,L as Y}from"./LayoutFooter-ac53aec7.js";import{m as x}from"./mitt-4d5f3f5b.js";import{_ as b}from"./_plugin-vue_export-helper-c27b6911.js";import{B as Z}from"./Burger-b074c7f6.js";const G={__name:"HorizontalMenu",setup(C){const a=L(),o=S([]),_=$(),f=y(""),c={initMainMenus(e){e.forEach(s=>{c.showMenuItem(s)?o.push(s):c.showChildren(s)&&c.initMainMenus(s.children)})},showMenuItem({meta:e}){return e!=null&&e.isHide||e!=null&&e.roles&&!hasRole(e==null?void 0:e.roles)?!1:!!e},showChildren({children:e,meta:s}){if(e){if(s&&s.hideChildren)return!1}else return!1;return!0},menuItemClick(e){e.children&&e.children.length?x.emit("onMainMenuChange",e.children):(z.push(e.path),x.emit("onMainMenuChange",[]))},findRootPath(e,s){for(const n of e)if(n.path===s){f.value=s,this.menuItemClick(n);break}else if(n.children&&n.children.length&&this.dfs(n.children,s)){f.value=n.path,this.menuItemClick(n);break}},dfs(e,s){for(const n of e){if(n.path===s)return n;if(n.children&&n.children.length){const p=this.dfs(n.children,s);if(p)return p}}}};return B(()=>{c.initMainMenus(a.menus||[]),H(()=>_.path,e=>{c.findRootPath(o,e)},{immediate:!0})}),(e,s)=>{const n=i("el-icon"),p=i("el-menu-item"),v=i("el-menu");return r(),h(v,{mode:"horizontal","default-active":f.value},{default:l(()=>[(r(!0),M(V,null,R(d(o),u=>(r(),h(p,{key:u.path,index:u.path,onClick:m=>c.menuItemClick(u)},{title:l(()=>{var m;return[T(A(e.$t((m=u.meta)==null?void 0:m.title)),1)]}),default:l(()=>{var m;return[(m=u.meta)!=null&&m.icon?(r(),h(n,{key:0},{default:l(()=>[t(E,{name:u.meta.icon},null,8,["name"])]),_:2},1024)):g("",!0)]}),_:2},1032,["index","onClick"]))),128))]),_:1},8,["default-active"])}}},Q=b(G,[["__scopeId","data-v-b3cec98e"]]);const ee={class:"fv-header-mixture-nav flex items-center justify-between"},ne={class:"h-full flex items-center flex-1"},se={class:"flex items-center h-full mr-2 flex-shrink-0 fv-tools-mixture-nav"},te={__name:"LayoutHeader",setup(C){return(a,o)=>(r(),M("div",ee,[w("div",ne,[t(Z,{class:"fv-burger--mixture-nav"}),t(Q,{class:"flex-1"})]),w("div",se,[t(j,{class:"mr-1"}),t(D)])]))}},oe=b(te,[["__scopeId","data-v-71a8824c"]]);const ae={__name:"VerticalMenu",emits:["subMenuOpen","subMenuClose"],setup(C,{emit:a}){const o=a,_=k(),f=$(),c=F([]),e=I(()=>_.appConfig.menuIsCollapse);return O(()=>{x.on("onMainMenuChange",s=>{c.value=s})}),q(()=>{x.off("onMainMenuChange")}),(s,n)=>{const p=i("el-menu");return r(),h(p,{"collapse-transition":d(_).appConfig.enableCollapseTransition,"default-active":d(f).path,router:"",collapse:e.value,"unique-opened":d(_).appConfig.subMenuUniqueOpened,onOpen:n[0]||(n[0]=v=>o("subMenuOpen")),onClose:n[1]||(n[1]=v=>o("subMenuClose"))},{default:l(()=>[t(J,{routes:c.value},null,8,["routes"])]),_:1},8,["collapse-transition","default-active","collapse","unique-opened"])}}},le=b(ae,[["__scopeId","data-v-e487647f"]]);const re={class:"fv-aside"},ce={key:0,class:"fv-aside-logo flex items-center shrink-0"},ie={__name:"LayoutAside",setup(C){const a=k(),o=y();function _(){setTimeout(()=>{o.value.update()},300)}return(f,c)=>{const e=i("el-scrollbar");return r(),M("div",re,[d(a).appConfig.showLogo?(r(),M("div",ce,[t(K)])):g("",!0),t(e,{ref_key:"scrollbar",ref:o,class:"fv-aside-scrollbar"},{default:l(()=>[t(le,{onSubMenuOpen:_,onSubMenuClose:_})]),_:1},512)])}}},_e=b(ie,[["__scopeId","data-v-1f983481"]]);const ue={__name:"index",setup(C){N(f=>({"32c8891e":_.value}));const a=k(),o=y(),_=I(()=>a.appConfig.showFooter?"var(--fv-footer-heigth)":0);return U(()=>{setTimeout(()=>{o.value.update()},500)}),(f,c)=>{const e=i("el-aside"),s=i("el-header"),n=i("el-scrollbar"),p=i("el-main"),v=i("el-backtop"),u=i("el-container");return r(),h(u,{class:"h-screen w-screen"},{default:l(()=>[t(e,{width:"auto"},{default:l(()=>[t(_e)]),_:1}),t(u,null,{default:l(()=>[t(s,{style:{padding:"0"},class:P(d(a).appConfig.isTabs?"fv-tab-header":"fv-header")},{default:l(()=>[t(oe),d(a).appConfig.isTabs?(r(),h(W,{key:0})):g("",!0)]),_:1},8,["class"]),t(p,{class:"fv-el-main"},{default:l(()=>[t(n,{ref_key:"scrollbar",ref:o,class:"fv-main"},{default:l(()=>[t(X)]),_:1},512),d(a).appConfig.showFooter?(r(),h(Y,{key:0})):g("",!0)]),_:1}),d(a).appConfig.enableBacktop?(r(),h(v,{key:0,right:40,bottom:40,target:".fv-main>.el-scrollbar__wrap"})):g("",!0)]),_:1})]),_:1})}}},ve=b(ue,[["__scopeId","data-v-b87c14de"]]);export{ve as default};
