import{b as o,c as y,d as x,g as s,q as S,J as T,U as H,P as $,Y as O,a as V,f as i,C as d,h as a,i as f,V as F,Z as q,K as w,o as N,L as U,F as j,x as P,$ as D,S as v,s as B,l as E,k as z,W as J,X as K,n as W,j as X}from"./index-a248eb6b.js";import{B as Y}from"./Burger-b074c7f6.js";import{B as Z}from"./Breadcrumb-7b373c81.js";import{T as G,a as Q,_ as ee,S as A,A as ne,b as se,c as te,L as oe}from"./LayoutFooter-ac53aec7.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import{m as k}from"./mitt-4d5f3f5b.js";const ae={class:"fv-header-double-aside flex items-center justify-between"},le={class:"h-full flex items-center"},ce={class:"flex items-center mr-5 h-full"},ue={__name:"LayoutHeader",setup(C){return(c,r)=>(o(),y("div",ae,[x("div",le,[s(Y),s(Z,{style:{"margin-left":"8px"}})]),x("div",ce,[s(G,{class:"mr-1"}),s(Q)])]))}},re=M(ue,[["__scopeId","data-v-564ec994"]]);const ie={__name:"SubMenu",emits:["subMenuOpen","subMenuClose"],setup(C,{emit:c}){const r=c,u=S(),b=T(),p=H([]),l=$(()=>u.appConfig.menuIsCollapse);return O(()=>{k.on("onAMainMenuChange",h=>{p.value=h})}),V(()=>{k.off("onAMainMenuChange")}),(h,e)=>{const t=i("el-menu");return o(),d(t,{"collapse-transition":f(u).appConfig.enableCollapseTransition,"default-active":f(b).path,router:"",collapse:l.value,"unique-opened":f(u).appConfig.subMenuUniqueOpened,onOpen:e[0]||(e[0]=n=>r("subMenuOpen")),onClose:e[1]||(e[1]=n=>r("subMenuClose"))},{default:a(()=>[s(ee,{routes:p.value},null,8,["routes"])]),_:1},8,["collapse-transition","default-active","collapse","unique-opened"])}}},_e=M(ie,[["__scopeId","data-v-8339e18f"]]);const de={key:0,class:"flex flex-col items-center gap-y-1"},fe={__name:"MainMenu",setup(C){const c=S(),r=F(),u=q([]),b=T(),p=w(""),l={initMainMenus(e){e.forEach(t=>{l.showMenuItem(t)?u.push(t):l.showChildren(t)&&l.initMainMenus(t.children)})},showMenuItem({meta:e}){return e!=null&&e.isHide||e!=null&&e.roles&&!hasRole(e==null?void 0:e.roles)?!1:!!e},showChildren({children:e,meta:t}){if(e){if(t&&t.hideChildren)return!1}else return!1;return!0},menuItemClick(e){e.children&&e.children.length?k.emit("onAMainMenuChange",e.children):(z.push(e.path),k.emit("onAMainMenuChange",[]))},findRootPath(e,t){for(const n of e)if(n.path===t){p.value=t,this.menuItemClick(n);break}else if(n.children&&n.children.length&&this.dfs(n.children,t)){p.value=n.path,this.menuItemClick(n);break}},dfs(e,t){for(const n of e){if(n.path===t)return n;if(n.children&&n.children.length){const m=this.dfs(n.children,t);if(m)return m}}}},h=$(()=>c.appConfig.isMainMenuShowTitle);return N(()=>{l.initMainMenus(r.menus||[]),U(()=>b.path,e=>{l.findRootPath(u,e)},{immediate:!0})}),(e,t)=>{const n=i("el-icon"),m=i("el-menu-item"),R=i("el-menu");return o(),d(R,{"default-active":p.value,collapse:""},{default:a(()=>[(o(!0),y(j,null,P(f(u),_=>(o(),d(m,{key:_.path,index:_.path,onClick:g=>l.menuItemClick(_)},D({default:a(()=>{var g,L,I;return[h.value?(o(),y("div",de,[(g=_.meta)!=null&&g.icon?(o(),d(n,{key:0},{default:a(()=>[s(A,{name:_.meta.icon},null,8,["name"])]),_:2},1024)):v("",!0),x("span",null,B(e.$t((L=_.meta)==null?void 0:L.title)),1)])):v("",!0),(I=_.meta)!=null&&I.icon&&!h.value?(o(),d(n,{key:1},{default:a(()=>[s(A,{name:_.meta.icon},null,8,["name"])]),_:2},1024)):v("",!0)]}),_:2},[h.value?void 0:{name:"title",fn:a(()=>{var g;return[E(B(e.$t((g=_.meta)==null?void 0:g.title)),1)]}),key:"0"}]),1032,["index","onClick"]))),128))]),_:1},8,["default-active"])}}},pe=M(fe,[["__scopeId","data-v-305b0438"]]);const he={class:"fv-aside"},me={key:0,class:"flex items-center shrink-0 fv-aside-logo"},ve={class:"flex flex-1 shrink-0 fv-menu-double-side",style:{height:"calc(100% - var(--fv-header-height))"}},be={__name:"LayoutAside",setup(C){const c=S(),r=w();function u(){setTimeout(()=>{r.value.update()},300)}return(b,p)=>{const l=i("el-scrollbar");return o(),y("div",he,[f(c).appConfig.showLogo?(o(),y("div",me,[s(ne)])):v("",!0),x("div",ve,[s(l,{class:"fv-main-menu"},{default:a(()=>[s(pe)]),_:1}),s(l,{ref_key:"scrollbar",ref:r,class:"fv-sub-menu"},{default:a(()=>[s(_e,{onSubMenuOpen:u,onSubMenuClose:u})]),_:1},512)])])}}},ge=M(be,[["__scopeId","data-v-2318e177"]]);const ye=X({name:"DoubleAsideLayout"}),Me=Object.assign(ye,{setup(C){J(b=>({c1c082be:u.value}));const c=S(),r=w(),u=$(()=>c.appConfig.showFooter?"var(--fv-footer-heigth)":0);return K(()=>{setTimeout(()=>{r.value.update()},500)}),(b,p)=>{const l=i("el-aside"),h=i("el-header"),e=i("el-scrollbar"),t=i("el-main"),n=i("el-backtop"),m=i("el-container");return o(),d(m,{class:"h-screen w-screen"},{default:a(()=>[s(l,{width:"auto"},{default:a(()=>[s(ge)]),_:1}),s(m,null,{default:a(()=>[s(h,{style:{padding:"0"},class:W(f(c).appConfig.isTabs?"fv-tab-header":"fv-header")},{default:a(()=>[s(re),f(c).appConfig.isTabs?(o(),d(se,{key:0})):v("",!0)]),_:1},8,["class"]),s(t,{class:"fv-el-main"},{default:a(()=>[s(e,{ref_key:"scrollbar",ref:r,class:"fv-main"},{default:a(()=>[s(te)]),_:1},512),f(c).appConfig.showFooter?(o(),d(oe,{key:0})):v("",!0)]),_:1}),f(c).appConfig.enableBacktop?(o(),d(n,{key:0,right:40,bottom:40,target:".fv-main>.el-scrollbar__wrap"})):v("",!0)]),_:1})]),_:1})}}}),Le=M(Me,[["__scopeId","data-v-b1f6812c"]]);export{Le as default};
